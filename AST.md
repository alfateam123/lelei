Lelei AST specs
===============

Why?
----

There are several use cases for an AST specification.

* explain (or learn) how Lelei works internally
* show how things should work between parsers and the builder

What is this Lelei AST, then?
-----------------------

Lelei AST is the common data structure that is exchanged between
parsers and builder in Lelei.

```
                           you're here
                               |
                               V
INPUT FILE ---> [Parser] ---> AST ---> [Builder] ---> OUTPUT FILE
```

A common data structure, generated by parsers and consumed by builders,
enables not only a cleaner separation from parsers and builders, but
lets a future implementor create a new parser or a builder for a different
output target: for example, you may need a C struct generator from XML,
or to be able to generate generic dissectors from a yaml file.

Structure definition (still WIP)
--------------------

- proto
  - proto_name 
  - proto_short

- header : same as `struct`. listing additional fields
  - id_field_name

- struct
  - name
  - fields
    - field
      - name
      - type
      - bits
      - byte_order

- enums
  - enum
    - size [bits]
    - name
    - values
      - value
        - id [number, base-10 or base-16]
        - name